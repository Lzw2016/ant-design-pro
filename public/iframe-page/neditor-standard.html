<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8" />
  <title>neditor</title>
</head>

<body style="margin: 0;">
  <div id="editor"></div>
</body>

<script type="text/javascript" charset="utf-8" src="neditor/neditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="neditor/neditor.all.min.js"> </script>
<script type="text/javascript" charset="utf-8" src="neditor/neditor.service.js"></script>
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="neditor/i18n/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="neditor/third-party/browser-md5-file.min.js"></script>
<script type="text/javascript" src="neditor/third-party/jquery-1.10.2.min.js"></script>

<script type="text/javascript">
  UE.registerUI(
    'myfullscreen',
    function (editor, uiName) {
      //注册按钮执行时的command命令，使用命令默认就会带有回退操作
      editor.registerCommand(uiName, {
        execCommand: function () {
          console.log("execCommand -->", uiName);
        }
      });

      //创建一个button
      var btn = new UE.ui.Button({
        //按钮的名字
        name: uiName,
        //提示
        title: uiName,
        //需要添加的额外样式，指定icon图标，这里默认使用一个重复的icon
        cssRules: "background-position: -220px 0;",
        //点击时执行的命令
        onclick: function () {
          console.log("onclick -->");
          editor.execCommand(uiName);
        }
      });

      //当点到编辑内容上时，按钮要做的状态反射
      editor.addListener('selectionchange', function () {
        var state = editor.queryCommandState(uiName);
        console.log("selectionchange -->", state);
        if (state == -1) {
          btn.setDisabled(true);
          btn.setChecked(false);
        } else {
          btn.setDisabled(false);
          btn.setChecked(state);
        }
      });

      //因为你是添加button,所以需要返回这个button
      return btn;
    }
    /*index 指定添加到工具栏上的那个位置，默认时追加到最后,editorId 指定这个UI是那个编辑器实例上的，默认是页面上所有的编辑器都会添加这个按钮*/
  );




  var editorId = "editor";
  var editor;
  // 初始化编辑器
  function initEditor(config) {
    if (editor) {
      editor.destroy();
    }
    var defaultConfig = {
      fullscreen: true,
      autoHeightEnabled: false,
      initialFrameWidth: "100%",
      initialFrameHeight: 300,
      elementPathEnabled: true,
      focus: true,
      readonly: false,
      wordCount: true,
      maximumWords: 50000,
      maxUndoCount: 20,
      initialContent: "",
      emotionLocalization: true,
      toolbars: [
        ['fullscreen', 'source', 'undo', 'redo', 'bold', "myfullscreen"],
        ["bold", "italic", "underline", "fontborder", "strikethrough",]
      ],
      // labelMap: {
      //   "myFullscreen": "全屏",
      // },
    };
    defaultConfig = $.extend(true, defaultConfig, config || {});
    console.log("defaultConfig | ", defaultConfig);
    editor = UE.getEditor(editorId, defaultConfig);
    if (config && config.placeholder) {
      editor.setPlaceholder(config.placeholder);
    }
  }

  // ---------------------------------------------------------------------------

  function isFocus(e) {
    alert(UE.getEditor('editor').isFocus());
    UE.dom.domUtils.preventDefault(e)
  }

  function setblur(e) {
    UE.getEditor('editor').blur();
    UE.dom.domUtils.preventDefault(e)
  }

  function insertHtml() {
    var value = prompt('插入html代码', '');
    UE.getEditor('editor').execCommand('insertHtml', value)
  }

  function createEditor() {
    enableBtn();
    UE.getEditor('editor');
  }

  function getAllHtml() {
    alert(UE.getEditor('editor').getAllHtml())
  }

  function getContent() {
    var arr = [];
    arr.push("使用editor.getContent()方法可以获得编辑器的内容");
    arr.push("内容为：");
    arr.push(UE.getEditor('editor').getContent());
    alert(arr.join("\n"));
  }

  function getPlainTxt() {
    var arr = [];
    arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
    arr.push("内容为：");
    arr.push(UE.getEditor('editor').getPlainTxt());
    alert(arr.join('\n'))
  }

  function setContent(isAppendTo) {
    var arr = [];
    arr.push("使用editor.setContent('欢迎使用ueditor')方法可以设置编辑器的内容");
    UE.getEditor('editor').setContent('欢迎使用ueditor', isAppendTo);
    alert(arr.join("\n"));
  }

  function setDisabled() {
    UE.getEditor('editor').setDisabled('fullscreen');
    disableBtn("enable");
  }

  function setEnabled() {
    UE.getEditor('editor').setEnabled();
    enableBtn();
  }

  function getText() {
    //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
    var range = UE.getEditor('editor').selection.getRange();
    range.select();
    var txt = UE.getEditor('editor').selection.getText();
    alert(txt)
  }

  function getContentTxt() {
    var arr = [];
    arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
    arr.push("编辑器的纯文本内容为：");
    arr.push(UE.getEditor('editor').getContentTxt());
    alert(arr.join("\n"));
  }

  function hasContent() {
    var arr = [];
    arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
    arr.push("判断结果为：");
    arr.push(UE.getEditor('editor').hasContents());
    alert(arr.join("\n"));
  }

  function setFocus() {
    UE.getEditor('editor').focus();
  }

  function deleteEditor() {
    disableBtn();
    UE.getEditor('editor').destroy();
  }

  function disableBtn(str) {
    var div = document.getElementById('btns');
    var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
    for (var i = 0, btn; btn = btns[i++];) {
      if (btn.id == str) {
        UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
      } else {
        btn.setAttribute("disabled", "true");
      }
    }
  }

  function enableBtn() {
    var div = document.getElementById('btns');
    var btns = UE.dom.domUtils.getElementsByTagName(div, "button");
    for (var i = 0, btn; btn = btns[i++];) {
      UE.dom.domUtils.removeAttributes(btn, ["disabled"]);
    }
  }

  function getLocalData() {
    alert(UE.getEditor('editor').execCommand("getlocaldata"));
  }

  function clearLocalData() {
    UE.getEditor('editor').execCommand("clearlocaldata");
    alert("已清空草稿箱")
  }
</script>

</html>
